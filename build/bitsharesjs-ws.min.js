!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function r(c,s,u){function f(e,n){if(!s[e]){if(!c[e]){var t="function"==typeof require&&require;if(!n&&t)return t(e,!0);if(a)return a(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[e]={t:{}};c[e][0].call(o.t,function(n){return f(c[e][1][n]||n)},o,o.t,r,c,s,u)}return s[e].t}for(var a="function"==typeof require&&require,n=0;n<u.length;n++)f(u[n]);return f}({1:[function(n,e,t){"use strict";t.s=!0;var r=i(n("./ChainWebSocket")),c=i(n("./GrapheneApi")),s=i(n("./ChainConfig"));function i(n){return n&&n.s?n:{default:n}}var o=void 0,u=!0;t.default={u:function(n){this.h=n,o&&o.u(n)},l:function(n){u=n},reset:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=this,t=arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3;return this.close().then(function(){return(o=new f).u(e.h),o&&t&&o.connect(n,i),o})},v:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3];return o||(o=new f).u(this.h),o&&e&&o.connect(n,t,i),o},m:function(){return Apis.v().p},close:function(){return o?new Promise(function(n){o.close().then(function(){o=null,n()})}):Promise.resolve()}};var f=function(){function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}return n.prototype.connect=function(t,n){var i=this,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.url=t;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&t.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this._=new r.default(t,this.h,n,u,function(){i.k&&i.k.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.S=this._.T("","").then(function(){console.log("Connected to API node:",t),i.k=new c.default(i._,"database"),i.g=new c.default(i._,"network_broadcast"),i.W=new c.default(i._,"history"),i.C=new c.default(i._,"asset"),o&&(i.R=new c.default(i._,"crypto"));var n=i.k.init().then(function(){return i.k.exec("get_chain_id",[]).then(function(n){return i.p=n,s.default.P(n)})});i._.I=function(){i._.T("","").then(function(){i.k.init().then(function(){i.h&&i.h("reconnect")}),i.g.init(),i.W.init(),i.C.init(),o&&i.R.init()})};var e=[n,i.g.init(),i.W.init(),i.C.init()];return o&&e.push(i.R.init()),Promise.all(e)})},n.prototype.close=function(){var n=this;return this._?this._.close().then(function(){n._=null}):(this._=null,Promise.resolve())},n.prototype.O=function(){return this.k},n.prototype.A=function(){return this.g},n.prototype.G=function(){return this.W},n.prototype.N=function(){return this.C},n.prototype.U=function(){return this.R},n.prototype.u=function(n){this.h=n},n}();e.t=t.default},{q:2,D:3,H:4}],2:[function(n,e,t){(function(n){"use strict";t.s=!0;var c=void 0,s={M:n.B.j||"GPH"};c={F:"CORE",M:"GPH",J:15,L:86400,V:86400,K:{X:{F:"BTS",M:"BTS",p:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},Y:{F:"MUSE",M:"MUSE",p:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},Z:{F:"TEST",M:"TEST",p:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},$:{F:"GOV",M:"FEW",p:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},P:function(n){var e,t,i=void 0,o=void 0,r=void 0;for(i=0,e=(t=Object.keys(c.K)).length;i<e;i++)if(r=t[i],(o=c.K[r]).p===n)return c.nn=r,o.M&&(c.M=o.M,s.M=o.M),{nn:r,en:o};c.nn||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){c.F="CORE",c.M="GPH",s.M="GPH",c.J=15,c.L=86400,console.log("Chain config reset")},tn:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GPH";c.M=n,s.M=n}},t.default=c,e.t=t.default}).call(this,n("_process"))},{in:7}],3:[function(t,i,o){(function(n){"use strict";o.s=!0;var u=void 0;u="undefined"!=typeof WebSocket||n.B.on?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?t("ReconnectingWebSocket"):WebSocket:t("ws");var f=5,a=2*f,e=function(){function s(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,i=this,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.h=n,this.rn=setTimeout(function(){if(i.cn){var n=i.cn;i.cn=null,i.sn.terminate?i.sn.terminate():i.sn.close(),n(new Error("Connection attempt timed out: "+e))}},t);var c=o||"undefined"==typeof WebSocket||"undefined"==typeof document?u:WebSocket;try{this.sn=new c(e)}catch(n){console.error("invalid websocket URL:",n,e),this.sn=new c("wss://127.0.0.1:8090")}this.sn.un=5e3,this.cn=null,this.I=null,this.fn=f,this.an=a,this.hn=r,this.ln=new Promise(function(n,e){i.cn=e,i.sn.onopen=function(){clearTimeout(i.rn),i.h&&i.h("open"),i.I&&i.I(),i.dn=setInterval(function(){if(i.an--,0==i.an)return console.error("keep alive timeout."),i.sn.terminate?i.sn.terminate():i.sn.close(),clearInterval(i.dn),void(i.dn=void 0);i.fn--,0==i.fn&&(i.hn&&i.hn(),i.fn=f)},5e3),i.cn=null,n()},i.sn.onerror=function(n){i.dn&&(clearInterval(i.dn),i.dn=void 0),clearTimeout(i.rn),i.h&&i.h("error"),i.cn&&i.cn(n)},i.sn.onmessage=function(n){i.an=a,i.listener(JSON.parse(n.data))},i.sn.onclose=function(){i.dn&&(clearInterval(i.dn),i.dn=void 0);for(var n=new Error("connection closed"),e=i.vn+1;e<=i.bn;e+=1)i.wn[e].reject(n);i.h&&i.h("closed"),i.mn&&i.mn()}}),this.bn=0,this.vn=0,this.wn={},this.pn={},this._n={}}return s.prototype.call=function(n){var t=this;if(1!==this.sn.readyState)return Promise.reject(new Error("websocket state error:"+this.sn.readyState));var e=n[1];if(this.bn+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this.pn[this.bn]={kn:n[2][0]},n[2][0]=this.bn),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var o in this.pn)if(this.pn[o].kn===i){this._n[this.bn]=o;break}}var r={method:"call",Sn:n};return r.id=this.bn,this.fn=f,new Promise(function(n,e){t.wn[t.bn]={time:new Date,resolve:n,reject:e},t.sn.send(JSON.stringify(r))})},s.prototype.listener=function(n){var e=!1,t=null;"notice"===n.method&&(e=!0,n.id=n.Sn[0]),e?t=this.pn[n.id].kn:(t=this.wn[n.id],this.vn=n.id),t&&!e?(n.error?t.reject(n.error):t.resolve(n.result),delete this.wn[n.id],this._n[n.id]&&(delete this.pn[this._n[n.id]],delete this._n[n.id])):t&&e?t(n.Sn[1]):console.log("Warning: unknown websocket response: ",n)},s.prototype.T=function(n,e){var t=this;return this.ln.then(function(){return t.call([1,"login",[n,e]])})},s.prototype.close=function(){var e=this;return new Promise(function(n){e.mn=function(){n(),e.mn=null},e.sn.close(),1!==e.sn.readyState&&n()})},s}();o.default=e,i.t=o.default}).call(this,t("_process"))},{Tn:5,in:7,sn:6}],4:[function(n,e,t){"use strict";t.s=!0;var i=function(){function t(n,e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._=n,this.yn=e}return t.prototype.init=function(){var e=this;return this._.call([1,this.yn,[]]).then(function(n){return e.gn=n,e})},t.prototype.exec=function(e,t){return this._.call([this.gn,e,t]).catch(function(n){throw console.log("!!! GrapheneApi error: ",e,t,n,JSON.stringify(n)),n})},t}();t.default=i,e.t=t.default},{}],5:[function(n,e,t){var i,o;i=this,o=function(){if("undefined"!=typeof window&&"WebSocket"in window)return l.prototype.onopen=function(n){},l.prototype.onclose=function(n){},l.prototype.Wn=function(n){},l.prototype.onmessage=function(n){},l.prototype.onerror=function(n){},l.En=!1,l.CONNECTING=WebSocket.CONNECTING,l.OPEN=WebSocket.OPEN,l.CLOSING=WebSocket.CLOSING,l.CLOSED=WebSocket.CLOSED,l;function l(n,e,t){var i={debug:!1,Cn:!0,Rn:1e3,Pn:3e4,xn:1.5,un:2e3,In:null,binaryType:"blob"};for(var o in t||(t={}),i)void 0!==t[o]?this[o]=t[o]:this[o]=i[o];this.url=n,this.On=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var r,c=this,s=!1,u=!1,f=null,a=document.createElement("div");function h(n,e){var t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}a.addEventListener("open",function(n){c.onopen(n)}),a.addEventListener("close",function(n){c.onclose(n)}),a.addEventListener("connecting",function(n){c.Wn(n)}),a.addEventListener("message",function(n){c.onmessage(n)}),a.addEventListener("error",function(n){c.onerror(n)}),this.addEventListener=a.addEventListener.bind(a),this.removeEventListener=a.removeEventListener.bind(a),this.dispatchEvent=a.dispatchEvent.bind(a),this.open=function(i){if((r=new WebSocket(c.url,e||[])).binaryType=this.binaryType,i){if(this.In&&this.On>this.In)return}else a.dispatchEvent(h("connecting")),this.On=0;(c.debug||l.En)&&console.debug("ReconnectingWebSocket","attempt-connect",c.url);var n=r,t=setTimeout(function(){(c.debug||l.En)&&console.debug("ReconnectingWebSocket","connection-timeout",c.url),u=!0,n.close(),u=!1},c.un);r.onopen=function(n){clearTimeout(t),(c.debug||l.En)&&console.debug("ReconnectingWebSocket","onopen",c.url),c.protocol=r.protocol,c.readyState=WebSocket.OPEN,c.On=0;var e=h("open");e.An=i,i=!1,a.dispatchEvent(e)},r.onclose=function(n){if(clearTimeout(t),r=null,s)c.readyState=WebSocket.CLOSED,a.dispatchEvent(h("close"));else{c.readyState=WebSocket.CONNECTING;var e=h("connecting");e.code=n.code,e.reason=n.reason,e.wasClean=n.wasClean,a.dispatchEvent(e),i||u||((c.debug||l.En)&&console.debug("ReconnectingWebSocket","onclose",c.url),a.dispatchEvent(h("close")));var t=c.Rn*Math.pow(c.xn,c.On);f=setTimeout(function(){c.On++,c.open(!0)},t>c.Pn?c.Pn:t)}},r.onmessage=function(n){(c.debug||l.En)&&console.debug("ReconnectingWebSocket","onmessage",c.url,n.data);var e=h("message");e.data=n.data,a.dispatchEvent(e)},r.onerror=function(n){(c.debug||l.En)&&console.debug("ReconnectingWebSocket","onerror",c.url,n),a.dispatchEvent(h("error"))}},1==this.Cn&&this.open(!1),this.send=function(n){if(r)return(c.debug||l.En)&&console.debug("ReconnectingWebSocket","send",c.url,n),r.send(n);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(n,e){void 0===n&&(n=1e3),s=!0,r&&r.close(n,e),f&&(clearTimeout(f),f=null)},this.refresh=function(){r&&r.close()}}},void 0!==e&&e.t?e.t=o():i.Tn=o()},{}],6:[function(n,e,t){},{}],7:[function(n,e,t){var i,o,r=e.t={};function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(i===setTimeout)return setTimeout(e,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(n){try{return i.call(null,e,0)}catch(n){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:c}catch(n){i=c}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(n){o=s}}();var f,a=[],h=!1,l=-1;function d(){h&&f&&(h=!1,f.length?a=f.concat(a):l=-1,a.length&&v())}function v(){if(!h){var n=u(d);h=!0;for(var e=a.length;e;){for(f=a,a=[];++l<e;)f&&f[l].Gn();l=-1,e=a.length}f=null,h=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(n){try{return o.call(null,e)}catch(n){return o.call(this,e)}}}(n)}}function b(n,e){this.Nn=n,this.Un=e}function w(){}r.qn=function(n){var e=new Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.push(new b(n,e)),1!==a.length||h||u(v)},b.prototype.Gn=function(){this.Nn.apply(null,this.Un)},r.title="browser",r.on=!0,r.B={},r.Dn=[],r.version="",r.Hn={},r.Mn=w,r.addListener=w,r.jn=w,r.Bn=w,r.removeListener=w,r.Fn=w,r.Jn=w,r.Ln=w,r.Vn=w,r.zn=function(n){return[]},r.Kn=function(n){throw new Error("process.binding is not supported")},r.Qn=function(){return"/"},r.Xn=function(n){throw new Error("process.chdir is not supported")},r.Yn=function(){return 0}},{}]},{},[1])(1)});